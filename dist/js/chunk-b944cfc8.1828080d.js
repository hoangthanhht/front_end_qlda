(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b944cfc8"],{"0581":function(t,e,a){},"401c":function(t,e,a){},b018:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("AdvancedTableNoteNorm")],1)},r=[],i=a("5530"),c=a("2f62"),o=a("25a6"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card card-custom card-stretch gutter-b"},[a("div",{staticClass:"control_bao_gia flex"},[a("div",{staticClass:"pl-9 mt-1.5"},[a("b-button",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"},on:{click:t.importExcelBaoGia}},[t._v(" Cập nhật dữ liệu ")])],1),a("div",{staticClass:"pl-96"},[a("b-form-file",{staticClass:"mt-3",attrs:{plain:""},on:{change:t.handleChange}})],1)]),t.stringSearch?a("div",{staticClass:"card-body pt-0 pb-3"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"\n              table\n              table-head-custom\n              table-vertical-center\n              table-head-bg\n              table-borderless\n            "},[t._m(0),0!==t.dataArrDmSearch.length?a("tbody",[t._l(t.dataArrDmSearch,(function(e,n){return[a("tr",{key:n,staticClass:"row_table_note"},[a("td",{staticStyle:{"max-width":"60px"}},[a("textarea",{staticClass:"ma_dinh_muc text-muted font-weight-bold",staticStyle:{"max-width":"60px"},domProps:{value:t.nodeSearch(n,"maDinhMuc")},on:{keypress:function(e){return t.handleSave(e,n)},click:t.hadleClickMaDM}})]),a("td",[a("textarea",{staticClass:"ten_ma_dinh_muc text-muted font-weight-bold",domProps:{value:t.nodeSearch(n,"tenMaDinhMuc")},on:{keypress:function(e){return t.handleSave(e,n)},click:t.hadleClickTenMaDM}})]),a("td",{staticStyle:{"max-width":"60px"}},[a("textarea",{staticClass:"don_vi_vi text-muted font-weight-bold",staticStyle:{"max-width":"60px"},domProps:{value:t.nodeSearch(n,"donVi_VI")},on:{keypress:function(e){return t.handleSave(e,n)},click:t.hadleClickTenMaDM}})]),a("td",[a("textarea",{staticClass:"ten_cv_en text-muted font-weight-bold",domProps:{value:t.nodeSearch(n,"tenCv_EN")},on:{keypress:function(e){return t.handleSave(e,n)},click:t.hadleClickTenMaDM}})]),a("td",{staticStyle:{"max-width":"60px"}},[a("textarea",{staticClass:"don_vi_en text-muted font-weight-bold",staticStyle:{"max-width":"60px"},domProps:{value:t.nodeSearch(n,"donVi_EN")},on:{keypress:function(e){return t.handleSave(e,n)},click:t.hadleClickTenMaDM}})]),a("td",[a("textarea",{staticClass:"url text-muted font-weight-bold",domProps:{value:t.nodeSearch(n,"url")},on:{keypress:function(e){return t.handleSave(e,n)},click:t.hadleClickTenMaDM}})]),a("td",[a("textarea",{staticClass:"area_notes",domProps:{value:t.nodeSearch(n,"ghiChuDinhMuc")},on:{keypress:function(e){return t.handleSave(e,n)}}})])])]}))],2):t._e()])])])]):a("div",{staticClass:"card-body pt-0 pb-3"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"\n              table\n              table-head-custom\n              table-vertical-center\n              table-head-bg\n              table-borderless\n            "},[t._m(1),0!==t.dataArrDinhMuc.length?a("tbody",[t._l(t.dataArrDinhMuc,(function(e,n){return[a("tr",{key:n,staticClass:"row_table_note"},[a("td",{staticStyle:{"max-width":"60px"}},[a("textarea",{staticClass:"ma_dinh_muc text-muted font-weight-bold",staticStyle:{"max-width":"60px"},domProps:{value:t.node(n,"maDinhMuc")},on:{keypress:function(e){return t.handleSave(e,n)}}})]),a("td",[a("textarea",{staticClass:"ten_ma_dinh_muc text-muted font-weight-bold",domProps:{value:t.node(n,"tenMaDinhMuc")},on:{keypress:function(e){return t.handleSave(e,n)}}})]),a("td",{staticStyle:{"max-width":"60px"}},[a("textarea",{staticClass:"don_vi_vi text-muted font-weight-bold",staticStyle:{"max-width":"60px"},domProps:{value:t.node(n,"donVi_VI")},on:{keypress:function(e){return t.handleSave(e,n)}}})]),a("td",[a("textarea",{staticClass:"ten_cv_en text-muted font-weight-bold",domProps:{value:t.node(n,"tenCv_EN")},on:{keypress:function(e){return t.handleSave(e,n)}}})]),a("td",{staticStyle:{"max-width":"60px"}},[a("textarea",{staticClass:"don_vi_en text-muted font-weight-bold",staticStyle:{"max-width":"60px"},domProps:{value:t.node(n,"donVi_EN")},on:{keypress:function(e){return t.handleSave(e,n)}}})]),a("td",[a("textarea",{staticClass:"url text-muted font-weight-bold",domProps:{value:t.node(n,"url")},on:{keypress:function(e){return t.handleSave(e,n)}}})]),a("td",[a("textarea",{staticClass:"area_notes",domProps:{value:t.node(n,"ghiChuDinhMuc")},on:{keypress:function(e){return t.handleSave(e,n)}}})])])]}))],2):t._e()])])])]),a("b-pagination",{attrs:{align:"right",pills:"",perPage:"20","total-rows":t.rows,size:"lg"},on:{"page-click":function(e){return t.dataArr(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-left"},[a("th",[t._v("mã định mức")]),a("th",[t._v("tên mã VI")]),a("th",[t._v("đơn vị VI")]),a("th",[t._v("tên mã EN")]),a("th",[t._v("đơn vị EN")]),a("th",[t._v("URL")]),a("th",[t._v("ghi chú")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-left"},[a("th",[t._v("mã định mức")]),a("th",[t._v("tên mã VI")]),a("th",[t._v("đơn vị VI")]),a("th",[t._v("tên mã EN")]),a("th",[t._v("đơn vị EN")]),a("th",[t._v("URL")]),a("th",[t._v("ghi chú")])])])}],d=(a("4de4"),a("d3b7"),a("ddb0"),a("d81d"),a("ac1f"),a("5319"),a("99af"),a("b64b"),a("caad"),a("2532"),a("e8ae")),u=a.n(d),h=a("3019"),v={name:"widget-3",data:function(){return{rows:100,currentPage:1,dataArrDinhMuc:[]}},created:function(){this["storeqlda/getAllListDataDm"]()},mounted:function(){this.dataArr(this.currentPage)},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["d"])({stringSearch:function(t){return t.storeqlda.stringSearch}})),Object(c["c"])(["storeqlda/getListDataDinhMuc","storeqlda/arrDmSearch","storeqlda/currentUser","currentUserPersonalInfo"])),{},{dataArrDmSearch:function(){return this["storeqlda/arrDmSearch"]}}),watch:{},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["storeqlda/getListDataDmHasPaging","storeqlda/getAllListDataDm","storeqlda/updateDataWithId","storeqlda/CreateDinhMucFromFile"])),{},{dataArr:function(t){var e=this;this["storeqlda/getListDataDmHasPaging"](t).then((function(t){e.dataArrDinhMuc=t.data.data,e.rows=t.data.total}))},handleChange:function(t){this.selectedFile=t.target.files[0]},importExcelBaoGia:function(){var t=this;if(confirm("Bạn có chắc chắn muốn up dữ liệu này không?"))if(this.selectedFile){var e=new u.a.Workbook,a=[],n=new FileReader;n.readAsBinaryString(this.selectedFile),n.onload=function(){var r=n.result;e.xlsx.load(r).then((function(){var n=e.getWorksheet(1);n.eachRow((function(t){var e=t.values.filter((function(t){return void 0!=t}));a.push(e)}));var r=0,i="",c="",o="",s=a[0];s=s.map((function(t){return Object(h["a"])(t).replace(/ /g,"").toLowerCase()}));var l=["madongia","tendongiavi","donvivi","tendongiaen","donvien","url","note"];n.eachRow((function(t){t.eachCell({includeEmpty:!0},(function(t,e){e<=s.length&&(i='"'.concat(s[r],'":"').concat(null!==t.value&&"number"!==typeof t.value?t.value.replace(/\\/g,"").replace(/"/g,"''"):t.value,'",'),c+=i,r++)})),c=c.substring(0,c.length-1),c="{".concat(c,"},"),o+=c,c="",r=0})),o=o.substring(0,o.length-1),o="[".concat(o,"]");var d=JSON.parse(o);for(var u in console.log(d),d.shift(),d){var v=Object.keys(d[u]);for(var m in l)v.includes(l[m])||(d[u][l[m]]=null)}o=JSON.stringify(d);var f={tempFinalRs:o,idUserImport:t.currentUserPersonalInfo.user.id};t["storeqlda/CreateDinhMucFromFile"](f).then((function(t){console.log("res",t),!1===t.ok&&alert(t.error)})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}}else alert("Bạn chưa chọn file import dữ liệu")},node:function(t,e){return this.dataArrDinhMuc[t]["".concat(e)]},nodeSearch:function(t,e){return this.dataArrDmSearch[t]["".concat(e)]},nodeDmSearch:function(t){return this["storeqlda/arrDmSearch"][t].ghiChuDinhMuc},getParentSelect:function(t,e){while(t.parentElement){var a=t.parentElement;if(a.matches(e))return a;t=a}},hadleClickMaDM:function(t){t.target.setAttribute("contenteditable","true")},hadleClickTenMaDM:function(t){t.target.setAttribute("contenteditable","true")},handleSave:function(t,e){var a=this.getParentSelect(t.target,".row_table_note"),n=a.querySelector(".ma_dinh_muc").value,r=a.querySelector(".ten_ma_dinh_muc").value,i=a.querySelector(".don_vi_vi").value,c=a.querySelector(".ten_cv_en").value,o=a.querySelector(".don_vi_en").value,s=a.querySelector(".url").value,l=a.querySelector(".area_notes").value,d=this.dataArrDinhMuc[e].id,u=this["storeqlda/currentUser"].id,h={maDinhMuc:n,tenMaDinhMuc:r,noteDinhMuc:l,idDinhMuc:d,donVi_VI:i,tenCv_EN:c,donVi_EN:o,url:s,idUser:u};"Enter"==t.key&&this["storeqlda/updateDataWithId"](h).then((function(t){!1===t.ok&&alert(t.error)}))}})},m=v,f=(a("e6f5"),a("2877")),g=Object(f["a"])(m,s,l,!1,null,"89e714a0",null),b=g.exports,p={name:"bangdinhmuc",components:{AdvancedTableNoteNorm:b},data:function(){return{tabIndex:0}},computed:Object(i["a"])(Object(i["a"])({},Object(c["c"])(["layoutConfig"])),{},{config:function(){return this.layoutConfig()}}),mounted:function(){this.$store.dispatch(o["a"],[{title:"Bảng giá định mức"}])},destroyed:function(){localStorage.removeItem("builderTab")},methods:{reset:function(t){t.preventDefault(),localStorage.removeItem("config"),window.location.reload()},submit:function(t){t.preventDefault(),localStorage.setItem("config",JSON.stringify(this.config)),window.location.reload()}}},_=p,S=(a("ed66"),Object(f["a"])(_,n,r,!1,null,"62873ec9",null));e["default"]=S.exports},e6f5:function(t,e,a){"use strict";a("401c")},ed66:function(t,e,a){"use strict";a("0581")}}]);
//# sourceMappingURL=chunk-b944cfc8.1828080d.js.map